{% extends "base.html" %}
{% load compressed %}

{% block breadcrumbs %}
{{ block.super }}
<li>Documents</li>
{% endblock %}

{% block custombodyclass %}documentlist fullwidth{% endblock %}

{% block additional_navbar %}
    {% include 'documents/document_list_navbar.html' %}
{% endblock %}

{% block content %}
    <div id="document-list-row" class="row">
        <div id="main-table" class="col-xs-12">
            {% include "documents/list_table.html" %}
        </div>
    </div>

    <div class="sidebar-offcanvas">
        <form action="{% url 'document_filter' organisation_slug category_slug %}"
              method="get"
              id="table-filters">
            {% for hidden in form.hidden_fields %}{{ hidden }}{% endfor %}
            {% include "documents/form_filtering.html" %}
        </form>
    </div>
{% endblock %}

{% block extra_js %}
    {% compressed_js "list" %}
    {% compressed_js "datatable" %}

    <script>
    var config = {
        userId: {% if request.user.is_authenticated %}{{ request.user.id }}{% else %}undefined{% endif %},
        csrfToken: "{{ csrf_token }}",
        createUrl: "{% url "favorite_create" %}",
        deleteUrl: "{% url "favorite_delete" "0" %}",
        filterUrl: "{% url "document_filter" organisation_slug category_slug %}",
        detailUrl: "{% url "document_detail" organisation_slug category_slug "documentNumber" %}",
        numPages: {{ paginator.num_pages }},
        totalItems: {{ paginator.count }},
        numItemsPerPage: {{ items_per_page }}
    };
    var tableData = {{ initial_data|safe }};

    </script>
{% endblock extra_js %}
